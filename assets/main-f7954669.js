(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const a={bd:null,result:0,expression:"",equalPressed:0,idEnEdicion:null,memoryContainer:null,valorOriginalMemoria:0,idUltimoResultado:null},Q=document.querySelector(".btnGuardar");function tt(t){if(!t.bd||!t.memoryContainer)return;const r=t.bd.transaction("numero","readonly").objectStore("numero").openCursor();r.onsuccess=i=>{const s=i.target.result;if(s){const c=document.createElement("div");c.textContent=`Número: ${s.value.numero}`,t.memoryContainer.appendChild(c),s.continue()}V()}}function Y(){a.memoryContainer=document.querySelector("#Memory"),Q.addEventListener("click",$);const t=indexedDB.open("Resultado-y-operaciones");t.addEventListener("error",it),t.addEventListener("success",ot),t.addEventListener("upgradeneeded",et)}function et(t){const n=t.target.result.createObjectStore("numero",{keyPath:"id",autoIncrement:!0});n.createIndex("ecuacion","ecuacion",{unique:!1}),n.createIndex("resultado","resultado",{unique:!1})}function $(){if(!a.expression||a.expression.trim()===""){alert("No puedes guardar una ecuación vacía.");return}const e=a.bd.transaction(["numero"],"readwrite").objectStore("numero");let n;a.idEnEdicion!==null?(n=e.put({id:a.idEnEdicion,ecuacion:a.expression,resultado:a.result}),a.idEnEdicion=null):n=e.add({ecuacion:a.expression,resultado:a.result}),n.onsuccess=r=>{a.idUltimoResultado=r.target.result,b()},input.value="",a.expression="",a.result=""}function b(){a.memoryContainer.innerHTML="";const n=a.bd.transaction(["numero"],"readonly").objectStore("numero").openCursor();n.onsuccess=r=>{const i=r.target.result,s=i.value.id;if(i){const c=document.createElement("div");c.className="contenido",c.dataset.id=i.value.id,c.innerHTML=`
                <div class="Flex-container">
                <div class="Flex-space">
                    <strong>Ecuación:</strong> <div class="ecuacionn">${i.value.ecuacion}</div>
                </div>
                <div class="Flex-space">
                    <strong>Resultado:</strong> <div class="resultadoo">${i.value.resultado}</div>
                </div>
                </div>
                <div class="Flex">
                <div class="Flex-left">
                    <button class="borrar"><span id="color-span1" class="material-symbols-outlined">
                                    delete
                                </span></button>
                    <button class="Mmas">M+</button>
                    <button class="Mmenos">M-</button>
                    <button class="editarr"><span class="material-symbols-outlined">
                                     edit
                    </span></button>
                </div>
                </div>
            `,c.querySelector(".borrar").addEventListener("click",()=>rt(s)),c.querySelector(".editarr").addEventListener("click",()=>nt(s)),a.memoryContainer.appendChild(c),i.continue()}}}function nt(t){const r=a.bd.transaction(["numero"],"readonly").objectStore("numero").get(t);r.onsuccess=()=>{const i=r.result;i&&(a.idEnEdicion=t,input.value=i.ecuacion,a.expression=i.ecuacion,a.result=i.resultado)}}function rt(t){const e=a.bd.transaction(["numero"],"readwrite");e.objectStore("numero").delete(t),e.addEventListener("complete",b)}function A(){const t=a.bd.transaction(["numero"],"readwrite");t.objectStore("numero").clear(),t.addEventListener("complete",b)}function it(t){console.error("Error en IndexedDB",t)}function ot(t){a.bd=t.target.result,b(),V();function e(n,r){if(!a.bd)return;const s=a.bd.transaction(["numero"],"readwrite").objectStore("numero"),c=s.get(n);c.onsuccess=l=>{const u=l.target.result;if(!u)return;u.resultadoOriginal===void 0&&(u.resultadoOriginal=Math.abs(Number(u.resultado)));let q=Number(u.resultado);r==="sumar"&&(q+=Number(input.value)),r==="restar"&&(q-=Number(input.value)),u.resultado=q;const X=s.put(u);X.onsuccess=()=>{const P=a.memoryContainer.querySelector(`.contenido[data-id='${n}'] .resultadoo`);P&&(P.textContent=u.resultado)}}}document.addEventListener("click",n=>{const r=n.target;if(r.classList.contains("Mmas")){const i=r.closest(".contenido");if(!i||!i.dataset.id)return;const s=Number(i.dataset.id);e(s,"sumar")}if(r.classList.contains("Mmenos")){const i=r.closest(".contenido");if(!i||!i.dataset.id)return;const s=Number(i.dataset.id);e(s,"restar")}})}function V(){const n=a.bd.transaction(["numero"],"readonly").objectStore("numero").openCursor(null,"prev");n.onsuccess=r=>{const i=r.target.result;i?(a.valorOriginalMemoria=parseFloat(i.value.resultado),a.idUltimoResultado=i.value.id):(a.valorOriginalMemoria=0,a.idUltimoResultado=null)},n.onerror=r=>{console.error("Error al obtener último resultado",r),a.valorOriginalMemoria=0,a.idUltimoResultado=null}}function B(){if(a.idUltimoResultado===null)return;const t=a.bd.transaction(["numero"],"readwrite"),e=t.objectStore("numero"),n=e.get(a.idUltimoResultado);n.onsuccess=()=>{const r=n.result,i=parseFloat(r.resultado)+Number(input.value);e.put({id:a.idUltimoResultado,ecuacion:r.ecuacion,resultado:i}),t.oncomplete=()=>b()}}function R(){if(a.idUltimoResultado===null)return;const t=a.bd.transaction(["numero"],"readwrite"),e=t.objectStore("numero"),n=e.get(a.idUltimoResultado);n.onsuccess=()=>{const r=n.result,i=parseFloat(r.resultado)-Number(input.value);e.put({id:a.idUltimoResultado,ecuacion:r.ecuacion,resultado:i}),t.oncomplete=()=>b()}}globalMPlus.addEventListener("click",B);globalMMinus.addEventListener("click",R);btnRecuperarMemoria.addEventListener("click",O);function O(){const n=a.bd.transaction(["numero"],"readonly").objectStore("numero").openCursor(null,"prev");n.onsuccess=r=>{const i=r.target.result;i?(input.value=i.value.resultado,console.log("Memoria recuperada:",i.value.resultado,"de ecuación:",i.value.ecuacion)):console.log("No hay memoria en IndexedDB")},n.onerror=r=>{console.error("Error al recuperar memoria:",r)}}window.addEventListener("load",Y);const p=document.querySelector(".scroll1"),x=document.querySelector(".memory-mobile"),C=document.querySelector(".workspace");function z(){window.innerWidth<=500?x&&p&&!x.contains(p)&&x.appendChild(p):C&&p&&!C.contains(p)&&C.appendChild(p)}function st(t){if(window.__appInitialized)return;window.__appInitialized=!0;async function e(){t.value="",a.expression="",a.result="";try{Y()}catch(n){console.error("Error inicializando DB:",n)}if(a.bd&&a.memoryContainer)try{tt(a)}catch(n){console.error("Error cargando historial:",n)}z(),window.addEventListener("resize",z)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>void e()):e()}const d=Math.cosh||function(t){return Math.abs(t)<1e-9?1-t:(Math.exp(t)+Math.exp(-t))*.5},m=Math.sinh||function(t){return Math.abs(t)<1e-9?t:(Math.exp(t)-Math.exp(-t))*.5},at=function(t){const e=Math.PI/4;if(-e>t||t>e)return Math.cos(t)-1;const n=t*t;return n*(n*(n*(n*(n*(n*(n*(n/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},k=function(t,e){return t=Math.abs(t),e=Math.abs(e),t<e&&([t,e]=[e,t]),t<1e8?Math.sqrt(t*t+e*e):(e/=t,t*Math.sqrt(1+e*e))},M=function(){throw SyntaxError("Invalid Param")};function L(t,e){const n=Math.abs(t),r=Math.abs(e);return t===0?Math.log(r):e===0?Math.log(n):n<3e3&&r<3e3?Math.log(t*t+e*e)*.5:(t=t*.5,e=e*.5,.5*Math.log(t*t+e*e)+Math.LN2)}const ct={re:0,im:0},f=function(t,e){const n=ct;if(t==null)n.re=n.im=0;else if(e!==void 0)n.re=t,n.im=e;else switch(typeof t){case"object":if("im"in t&&"re"in t)n.re=t.re,n.im=t.im;else if("abs"in t&&"arg"in t){if(!isFinite(t.abs)&&isFinite(t.arg))return o.INFINITY;n.re=t.abs*Math.cos(t.arg),n.im=t.abs*Math.sin(t.arg)}else if("r"in t&&"phi"in t){if(!isFinite(t.r)&&isFinite(t.phi))return o.INFINITY;n.re=t.r*Math.cos(t.phi),n.im=t.r*Math.sin(t.phi)}else t.length===2?(n.re=t[0],n.im=t[1]):M();break;case"string":n.im=n.re=0;const r=t.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let i=1,s=0;r===null&&M();for(let c=0;c<r.length;c++){const l=r[c];l===" "||l==="	"||l===`
`||(l==="+"?i++:l==="-"?s++:l==="i"||l==="I"?(i+s===0&&M(),r[c+1]!==" "&&!isNaN(r[c+1])?(n.im+=parseFloat((s%2?"-":"")+r[c+1]),c++):n.im+=parseFloat((s%2?"-":"")+"1"),i=s=0):((i+s===0||isNaN(l))&&M(),r[c+1]==="i"||r[c+1]==="I"?(n.im+=parseFloat((s%2?"-":"")+l),c++):n.re+=parseFloat((s%2?"-":"")+l),i=s=0))}i+s>0&&M();break;case"number":n.im=0,n.re=t;break;default:M()}return isNaN(n.re)||isNaN(n.im),n};function o(t,e){if(!(this instanceof o))return new o(t,e);const n=f(t,e);this.re=n.re,this.im=n.im}o.prototype={re:0,im:0,sign:function(){const t=k(this.re,this.im);return new o(this.re/t,this.im/t)},add:function(t,e){const n=f(t,e),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im));return r||i?r&&i?o.NAN:o.INFINITY:new o(this.re+n.re,this.im+n.im)},sub:function(t,e){const n=f(t,e),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im));return r||i?r&&i?o.NAN:o.INFINITY:new o(this.re-n.re,this.im-n.im)},mul:function(t,e){const n=f(t,e),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im)),s=this.re===0&&this.im===0,c=n.re===0&&n.im===0;return r&&c||i&&s?o.NAN:r||i?o.INFINITY:n.im===0&&this.im===0?new o(this.re*n.re,0):new o(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(t,e){const n=f(t,e),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im)),s=this.re===0&&this.im===0,c=n.re===0&&n.im===0;if(s&&c||r&&i)return o.NAN;if(c||r)return o.INFINITY;if(s||i)return o.ZERO;if(n.im===0)return new o(this.re/n.re,this.im/n.re);if(Math.abs(n.re)<Math.abs(n.im)){const l=n.re/n.im,u=n.re*l+n.im;return new o((this.re*l+this.im)/u,(this.im*l-this.re)/u)}else{const l=n.im/n.re,u=n.im*l+n.re;return new o((this.re+this.im*l)/u,(this.im-this.re*l)/u)}},pow:function(t,e){const n=f(t,e),r=this.re===0&&this.im===0;if(n.re===0&&n.im===0)return o.ONE;if(n.im===0){if(this.im===0&&this.re>0)return new o(Math.pow(this.re,n.re),0);if(this.re===0)switch((n.re%4+4)%4){case 0:return new o(Math.pow(this.im,n.re),0);case 1:return new o(0,Math.pow(this.im,n.re));case 2:return new o(-Math.pow(this.im,n.re),0);case 3:return new o(0,-Math.pow(this.im,n.re))}}if(r&&n.re>0)return o.ZERO;const s=Math.atan2(this.im,this.re),c=L(this.re,this.im);let l=Math.exp(n.re*c-n.im*s),u=n.im*c+n.re*s;return new o(l*Math.cos(u),l*Math.sin(u))},sqrt:function(){const t=this.re,e=this.im;if(e===0)return t>=0?new o(Math.sqrt(t),0):new o(0,Math.sqrt(-t));const n=k(t,e);let r=Math.sqrt(.5*(n+Math.abs(t))),i=Math.abs(e)/(2*r);return t>=0?new o(r,e<0?-i:i):new o(i,e<0?-r:r)},exp:function(){const t=Math.exp(this.re);return this.im===0?new o(t,0):new o(t*Math.cos(this.im),t*Math.sin(this.im))},expm1:function(){const t=this.re,e=this.im;return new o(Math.expm1(t)*Math.cos(e)+at(e),Math.exp(t)*Math.sin(e))},log:function(){const t=this.re,e=this.im;return e===0&&t>0?new o(Math.log(t),0):new o(L(t,e),Math.atan2(e,t))},abs:function(){return k(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const t=this.re,e=this.im;return new o(Math.sin(t)*d(e),Math.cos(t)*m(e))},cos:function(){const t=this.re,e=this.im;return new o(Math.cos(t)*d(e),-Math.sin(t)*m(e))},tan:function(){const t=2*this.re,e=2*this.im,n=Math.cos(t)+d(e);return new o(Math.sin(t)/n,m(e)/n)},cot:function(){const t=2*this.re,e=2*this.im,n=Math.cos(t)-d(e);return new o(-Math.sin(t)/n,m(e)/n)},sec:function(){const t=this.re,e=this.im,n=.5*d(2*e)+.5*Math.cos(2*t);return new o(Math.cos(t)*d(e)/n,Math.sin(t)*m(e)/n)},csc:function(){const t=this.re,e=this.im,n=.5*d(2*e)-.5*Math.cos(2*t);return new o(Math.sin(t)*d(e)/n,-Math.cos(t)*m(e)/n)},asin:function(){const t=this.re,e=this.im,n=new o(e*e-t*t+1,-2*t*e).sqrt(),r=new o(n.re-e,n.im+t).log();return new o(r.im,-r.re)},acos:function(){const t=this.re,e=this.im,n=new o(e*e-t*t+1,-2*t*e).sqrt(),r=new o(n.re-e,n.im+t).log();return new o(Math.PI/2-r.im,r.re)},atan:function(){const t=this.re,e=this.im;if(t===0){if(e===1)return new o(0,1/0);if(e===-1)return new o(0,-1/0)}const n=t*t+(1-e)*(1-e),r=new o((1-e*e-t*t)/n,-2*t/n).log();return new o(-.5*r.im,.5*r.re)},acot:function(){const t=this.re,e=this.im;if(e===0)return new o(Math.atan2(1,t),0);const n=t*t+e*e;return n!==0?new o(t/n,-e/n).atan():new o(t!==0?t/0:0,e!==0?-e/0:0).atan()},asec:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new o(0,1/0);const n=t*t+e*e;return n!==0?new o(t/n,-e/n).acos():new o(t!==0?t/0:0,e!==0?-e/0:0).acos()},acsc:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new o(Math.PI/2,1/0);const n=t*t+e*e;return n!==0?new o(t/n,-e/n).asin():new o(t!==0?t/0:0,e!==0?-e/0:0).asin()},sinh:function(){const t=this.re,e=this.im;return new o(m(t)*Math.cos(e),d(t)*Math.sin(e))},cosh:function(){const t=this.re,e=this.im;return new o(d(t)*Math.cos(e),m(t)*Math.sin(e))},tanh:function(){const t=2*this.re,e=2*this.im,n=d(t)+Math.cos(e);return new o(m(t)/n,Math.sin(e)/n)},coth:function(){const t=2*this.re,e=2*this.im,n=d(t)-Math.cos(e);return new o(m(t)/n,-Math.sin(e)/n)},csch:function(){const t=this.re,e=this.im,n=Math.cos(2*e)-d(2*t);return new o(-2*m(t)*Math.cos(e)/n,2*d(t)*Math.sin(e)/n)},sech:function(){const t=this.re,e=this.im,n=Math.cos(2*e)+d(2*t);return new o(2*d(t)*Math.cos(e)/n,-2*m(t)*Math.sin(e)/n)},asinh:function(){let t=this.im;this.im=-this.re,this.re=t;const e=this.asin();return this.re=-this.im,this.im=t,t=e.re,e.re=-e.im,e.im=t,e},acosh:function(){const t=this.acos();if(t.im<=0){const e=t.re;t.re=-t.im,t.im=e}else{const e=t.im;t.im=-t.re,t.re=e}return t},atanh:function(){const t=this.re,e=this.im,n=t>1&&e===0,r=1-t,i=1+t,s=r*r+e*e,c=s!==0?new o((i*r-e*e)/s,(e*r+i*e)/s):new o(t!==-1?t/0:0,e!==0?e/0:0),l=c.re;return c.re=L(c.re,c.im)/2,c.im=Math.atan2(c.im,l)/2,n&&(c.im=-c.im),c},acoth:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new o(0,Math.PI/2);const n=t*t+e*e;return n!==0?new o(t/n,-e/n).atanh():new o(t!==0?t/0:0,e!==0?-e/0:0).atanh()},acsch:function(){const t=this.re,e=this.im;if(e===0)return new o(t!==0?Math.log(t+Math.sqrt(t*t+1)):1/0,0);const n=t*t+e*e;return n!==0?new o(t/n,-e/n).asinh():new o(t!==0?t/0:0,e!==0?-e/0:0).asinh()},asech:function(){const t=this.re,e=this.im;if(this.isZero())return o.INFINITY;const n=t*t+e*e;return n!==0?new o(t/n,-e/n).acosh():new o(t!==0?t/0:0,e!==0?-e/0:0).acosh()},inverse:function(){if(this.isZero())return o.INFINITY;if(this.isInfinite())return o.ZERO;const t=this.re,e=this.im,n=t*t+e*e;return new o(t/n,-e/n)},conjugate:function(){return new o(this.re,-this.im)},neg:function(){return new o(-this.re,-this.im)},ceil:function(t){return t=Math.pow(10,t||0),new o(Math.ceil(this.re*t)/t,Math.ceil(this.im*t)/t)},floor:function(t){return t=Math.pow(10,t||0),new o(Math.floor(this.re*t)/t,Math.floor(this.im*t)/t)},round:function(t){return t=Math.pow(10,t||0),new o(Math.round(this.re*t)/t,Math.round(this.im*t)/t)},equals:function(t,e){const n=f(t,e);return Math.abs(n.re-this.re)<=o.EPSILON&&Math.abs(n.im-this.im)<=o.EPSILON},clone:function(){return new o(this.re,this.im)},toString:function(){let t=this.re,e=this.im,n="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(t)<o.EPSILON&&(t=0),Math.abs(e)<o.EPSILON&&(e=0),e===0?n+t:(t!==0?(n+=t,n+=" ",e<0?(e=-e,n+="-"):n+="+",n+=" "):e<0&&(e=-e,n+="-"),e!==1&&(n+=e),n+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};o.ZERO=new o(0,0);o.ONE=new o(1,0);o.I=new o(0,1);o.PI=new o(Math.PI,0);o.E=new o(Math.E,0);o.INFINITY=new o(1/0,1/0);o.NAN=new o(NaN,NaN);o.EPSILON=1e-15;Math.sec=t=>1/Math.cos(t);Math.cot=t=>1/Math.tan(t);Math.csc=t=>1/Math.sin(t);Math.asec=t=>Math.acos(1/t);Math.acot=t=>Math.atan(1/t);Math.acsc=t=>Math.asin(1/t);Math.sech=t=>1/Math.cosh(t);Math.coth=t=>1/Math.tanh(t);Math.csch=t=>1/Math.sinh(t);Math.acoth=t=>.5*Math.log((t+1)/(t-1));Math.asech=t=>Math.log((1+Math.sqrt(1-t*t))/t);Math.acsch=t=>Math.log(1/t+Math.sqrt(1+1/(t*t)));Math.logxy=(t,e)=>Math.log(t)/Math.log(e);Math.EXPT=(t,e)=>t*Math.pow(10,e);Math.mod=(t,e)=>(t%e+e)%e;Math.DEG=(t,e,n)=>t+e/60+n/3600;Math.DMS=t=>{const e=Math.floor(t),n=(t-e)*60,r=Math.floor(n),i=(n-r)*60;return`${e}° ${r}' ${i.toFixed(2)}"`};typeof Math.ln!="function"&&(Math.ln=t=>Math.log(t));function J(t){return t<=1?1:t*J(t-1)}function lt(t){let e=t.replace(/(\d)(\()/g,"$1*$2");return e=e.replace(/(\))(\d)/g,"$1*$2"),e}function ut(){var t;return((t=document.getElementById("multiBtn"))==null?void 0:t.textContent)??null}function dt(t){const e=ut();return t.replace(/\b(sin|cos|tan|sec|csc|cot|asin|acos|atan|asec|acsc|acot)\s*\(([^)]+)\)/g,(n,r,i)=>{let s=i,c="";return r.startsWith("a")||(e==="DEG"&&(s=`(${i})*Math.PI/180`),e==="GRAD"&&(s=`(${i})*Math.PI/200`)),r.startsWith("a")&&(e==="DEG"&&(c="*180/Math.PI"),e==="GRAD"&&(c="*200/Math.PI")),`${r}(${s})${c}`})}window.raizCompleja=t=>t>=0?t**.5:new o(0,Math.sqrt(-t));window.raizCubicaCompleja=t=>t>=0?Math.cbrt(t):new o(t,0).pow(1/3);function ht(t){try{const e=Function('"use strict"; return ('+t+")")();return console.log("Expresión evaluada:",t),e instanceof o?e.toString():String(e)}catch(e){return console.error("Error evaluando expresión:",e),"Syntax ERROR"}}function mt(t){let e=t;return e=e.replaceAll("pow(","Math.pow(").replaceAll("xylog(","Math.logxy(").replace(/(\d+\.?\d*)→dms/g,"Math.DMS($1)").replace(/(\d+),(\d+),(\d+)→deg/g,"Math.DEG($1,$2,$3)").replace(/²√(-?\d+(\.\d+)?)/g,(n,r)=>`raizCompleja(${r})`).replace(/∛(-?\d+(\.\d+)?)/g,(n,r)=>`raizCubicaCompleja(${r})`).replace(/yroot(\d+(\.\d+)?|\([^()]+\))/g,"Math.pow($1)").replaceAll("MOD(","Math.mod(").replace(new RegExp("(?<=\\d),(?=\\d)(?!(?:[^(]*\\)))","g"),".").replace("π","Math.PI").replace(/\bacoth\b/g,"Math.acoth").replace(/\bacsch\b/g,"Math.acsch").replace(/\basech\b/g,"Math.asech").replace(/\basin\b/g,"Math.asin").replace(/\bacos\b/g,"Math.acos").replace(/\batan\b/g,"Math.atan").replace(/\basec\b/g,"Math.asec").replace(/\bacsc\b/g,"Math.acsc").replace(/\bacot\b/g,"Math.acot").replace(/\basinh\b/g,"Math.asinh").replace(/\bacosh\b/g,"Math.acosh").replace(/\batanh\b/g,"Math.atanh").replace(/\bsinh\b/g,"Math.sinh").replace(/\bcosh\b/g,"Math.cosh").replace(/\btanh\b/g,"Math.tanh").replace(/\bcoth\b/g,"Math.coth").replace(/\bcsch\b/g,"Math.csch").replace(/\bsech\b/g,"Math.sech").replace(/\bsin\b/g,"Math.sin").replace(/\bcos\b/g,"Math.cos").replace(/\btan\b/g,"Math.tan").replace(/\bsec\b/g,"Math.sec").replace(/\bcot\b/g,"Math.cot").replaceAll("exp(","Math.EXPT(").replaceAll("²","**2").replaceAll("³","**3").replaceAll("^","**").replace(/-(\d+(\.\d+)?)\*\*/g,"(-$1)**").replace(/log\(/g,"Math.log10(").replace(/(^|[^a-zA-Z0-9_])e\^(\([^)]+\)|\d+(\.\d+)?)/g,(n,r,i)=>`${r}Math.exp(${i})`).replace(/(^|[^a-zA-Z0-9_])\be\b/g,(n,r)=>`${r}Math.E`).replaceAll("10^","10**").replaceAll("|x|","Math.abs(").replaceAll("⌊x⌋(","Math.floor(").replaceAll("⌈x⌉(","Math.ceil(").replace(/(\d+(\.\d+)?)([*/])(\d+(\.\d+)?)%/g,(n,r,i,s,c)=>`${r}${s}(${c}/100)`).replace(/(\d+(\.\d+)?)([+\-])(\d+(\.\d+)?)%/g,(n,r,i,s,c)=>`${r}${s}(${r}*${c}/100)`).replace(/(\d+(\.\d+)?)%/g,(n,r)=>`(${r}*0.01)`).replace(/(\d+(\.\d+)?)%(\d+(\.\d+)?)/g,(n,r,i,s)=>`((${r}/${s})*100)`).replace(/(\d+)!/g,(n,r)=>J(Number(r)).toString()).replace(new RegExp("(?<=[+\\-*/(])0+(?=\\d(?![.,]))","g"),""),e=dt(e),e}function ft(){const t=document.querySelector("#input");t&&t.value!==""&&parseFloat(t.value)!==0?(t.value=(1/parseFloat(t.value)).toString(),a.expression=t.value):alert("Error: División entre 0")}function pt(){const t=document.querySelector("#input");if(!t)return;const e=t.value,n=/(-?\d+(\.\d+)?)(?!.*\d)/,r=e.match(n);if(r&&r.index!==void 0){const i=r[0],s=i.startsWith("-")?i.slice(1):"-"+i;t.value=e.slice(0,r.index)+s+e.slice(r.index+i.length),a.expression=t.value}}function Mt(t){const e=`0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVW⌊⌋XYZ+-*/=!^⌈.⌉,|→π²³√()%∛°'"`;for(let i=0;i<t.length;i++)if(!e.includes(t[i]))return{valido:!1,error:`Carácter inválido: "${t[i]}"`};const n=/[a-zA-Z]+|\d+(\.\d+)?|['"]|[%+\-*/^=()]/g,r=t.match(n);return!r||r.length===0?{valido:!1,error:"Ecuación vacía o inválida"}:{valido:!0,tokens:r}}function bt(t){const e=Mt(t);return e.valido?!0:(alert("Error: "+e.error),!1)}const E=document.querySelector("#input"),N=document.querySelector("#historyContent");function gt(t,e,n){if(!N)return;const r=document.createElement("div");r.className="history-item",a.result=n,a.expression=e;const i=document.createElement("span"),s=n!=null?n.toString():"";i.textContent=`${e} = ${s}`,i.dataset.userResult=s,i.style.cursor="pointer",i.dataset.userInput=e,i.dataset.userResult=s,i.addEventListener("click",()=>{E&&(E.value=i.dataset.userInput??"")}),r.appendChild(i),r.dataset.idi=t.toString();const c=document.createElement("button");c.textContent="Eliminar",c.className="delete-history",c.addEventListener("click",()=>{W(Number(r.dataset.idi)),r.remove()}),r.appendChild(c),N.appendChild(r),yt(t,e,n)}function yt(t,e,n){const r=JSON.parse(localStorage.getItem("historial")||"[]");r.push({idi:t,expression:e,result:n}),localStorage.setItem("historial",JSON.stringify(r))}function vt(){JSON.parse(localStorage.getItem("historial")||"[]").forEach(e=>wt(e.idi,e.expression,e.result))}function wt(t,e,n){if(!N)return;const r=document.createElement("div");r.className="history-item",a.result=n,a.expression=e;const i=document.createElement("span"),s=n!=null?n.toString():"";i.textContent=`${e} = ${s}`,i.dataset.userResult=s,i.style.cursor="pointer",i.dataset.userInput=e,i.dataset.userResult=s,i.addEventListener("click",()=>{E&&(E.value=i.dataset.userInput??"")}),r.appendChild(i);const c=document.createElement("button");c.textContent="Eliminar",c.className="delete-history",c.addEventListener("click",()=>{W(Number(r.dataset.idi)),r.remove()}),r.appendChild(c),r.dataset.idi=t.toString(),N.appendChild(r)}function W(t){const n=JSON.parse(localStorage.getItem("historial")||"[]").filter(r=>r.idi!==t);localStorage.setItem("historial",JSON.stringify(n))}function It(t,e){const n=Date.now()+Math.random();gt(n,t,e)}window.addEventListener("load",()=>{vt()});const Et=[{btnId:"clickk",panelId:"presionar"},{btnId:"clickk1",panelId:"presionar1"}],Nt=[{id:"equal",handler:I},{id:"equal1",handler:I},{id:"deleteAll",handler:A},{id:"restoreMemory",handler:O},{id:"memoryM",handler:B},{id:"memoryMe",handler:R},{id:"saveMemory",handler:$},{id:"equal2",handler:I},{id:"deleteAll1",handler:A},{id:"restoreMemory1",handler:O},{id:"memoryM1",handler:B},{id:"memoryMe1",handler:R},{id:"saveMemory1",handler:$}];Nt.forEach(t=>{const e=document.getElementById(t.id);e&&e.addEventListener("click",t.handler)});Et.forEach(t=>{const e=document.getElementById(t.btnId),n=document.getElementById(t.panelId);e&&n&&e.addEventListener("click",()=>n.classList.toggle("memoryButton"))});const v=document.querySelector("#Memory"),D=document.querySelector(".style-A");function St(){if(!v||!D)return;const t=v.style.display==="none"||v.style.display==="";v.style.display=t?"flex":"none",D.style.display=t?"flex":"none"}const _=document.querySelector(".style-A");_&&_.addEventListener("click",A);const qt=["#btn-mr","#btn-mr1","#btn-mr2"];qt.forEach(t=>{const e=document.querySelector(t);e&&e.addEventListener("click",St)});const K=document.querySelector("#menuHamburger"),y=document.querySelector(".sidebar");K.addEventListener("click",()=>{y.style.display=y.style.display==="none"||y.style.display===""?"flex":"none"});document.addEventListener("click",t=>{const e=K.contains(t.target),n=y.contains(t.target);!e&&!n&&(y.style.display="none")});const xt=document.querySelector(".scientific"),T=document.querySelector(".scientific-moreButtons"),Ct=document.getElementById("secondButton");Ct.addEventListener("click",()=>{const t=T.style.display==="none";T.style.display=t?"flex":"none",xt.style.display=t?"none":"flex"});let w=0;const g=document.getElementById("multiBtn");g&&g.addEventListener("click",()=>{switch(w){case 0:g.textContent="GRAD",w=1;break;case 1:g.textContent="DEG",w=2;break;case 2:g.textContent="RAD",w=0;break}});const Z=document.querySelector("#fBtn");let F=!1;Z&&Z.addEventListener("click",()=>{F=!F,console.log("F-E activado:",F)});const j=document.querySelector(".basic"),G=document.querySelector(".show-nt"),U=document.querySelector(".show-nt-grapic"),H=document.querySelector(".specialButtons");function S(t){switch(j.style.display="none",G.style.display="none",U.style.display="none",H.style.display="none",t){case"basic":j.style.display="flex";break;case"sci":G.style.display="flex",H.style.display="flex";break;case"graphic":U.style.display="flex";break}}S("basic");const h=document.getElementById("input"),kt=document.querySelectorAll(".button"),Lt=document.querySelector("#btnBasic"),Ft=document.querySelector("#btnScientific"),$t=document.querySelector("#btnGraphic");Lt.addEventListener("click",()=>S("basic"));Ft.addEventListener("click",()=>S("sci"));$t.addEventListener("click",()=>S("graphic"));st(h);function At(t){a.equalPressed&&(a.equalPressed=0);const n=t.target.dataset.number??"";switch(n){case"AC":h.value="",a.expression="";break;case"DEL":h.value=h.value.slice(0,-1),a.expression=h.value;break;case"+/-":pt(),a.expression=h.value;break;case"1/":ft(),a.expression=h.value;break;default:h.value+=n,a.expression=h.value}}function Bt(t){if(h&&t.target.tagName!=="button")switch(t.key){case"Backspace":h.value=h.value.slice(0,-1),a.expression=h.value,t.preventDefault();break;case"Enter":I(),t.preventDefault();break;default:h.focus();break}}typeof Math.log10!="function"&&(Math.log10=function(t){return Math.log(t)/Math.log(10)});function I(){try{a.equalPressed=1;const t=h.value;if(a.expression=t,!bt(t))return;let e=mt(t);e=lt(e);const n=ht(e);a.result=n,Rt(n),It(a.expression,a.result)}catch(t){alert(t instanceof Error?`Error: ${t.message}`:"Unknown error")}}function Rt(t){h.value=typeof t=="string"?t:Number.isInteger(t)?t.toString():t.toFixed(2)}window.__listenersRegistered||(kt.forEach(t=>t.addEventListener("click",At)),document.addEventListener("keydown",Bt),window.__listenersRegistered=!0);
