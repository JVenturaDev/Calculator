(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();const d=Math.cosh||function(t){return Math.abs(t)<1e-9?1-t:(Math.exp(t)+Math.exp(-t))*.5},m=Math.sinh||function(t){return Math.abs(t)<1e-9?t:(Math.exp(t)-Math.exp(-t))*.5},W=function(t){const e=Math.PI/4;if(-e>t||t>e)return Math.cos(t)-1;const n=t*t;return n*(n*(n*(n*(n*(n*(n*(n/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},S=function(t,e){return t=Math.abs(t),e=Math.abs(e),t<e&&([t,e]=[e,t]),t<1e8?Math.sqrt(t*t+e*e):(e/=t,t*Math.sqrt(1+e*e))},M=function(){throw SyntaxError("Invalid Param")};function q(t,e){const n=Math.abs(t),r=Math.abs(e);return t===0?Math.log(r):e===0?Math.log(n):n<3e3&&r<3e3?Math.log(t*t+e*e)*.5:(t=t*.5,e=e*.5,.5*Math.log(t*t+e*e)+Math.LN2)}const X={re:0,im:0},p=function(t,e){const n=X;if(t==null)n.re=n.im=0;else if(e!==void 0)n.re=t,n.im=e;else switch(typeof t){case"object":if("im"in t&&"re"in t)n.re=t.re,n.im=t.im;else if("abs"in t&&"arg"in t){if(!isFinite(t.abs)&&isFinite(t.arg))return o.INFINITY;n.re=t.abs*Math.cos(t.arg),n.im=t.abs*Math.sin(t.arg)}else if("r"in t&&"phi"in t){if(!isFinite(t.r)&&isFinite(t.phi))return o.INFINITY;n.re=t.r*Math.cos(t.phi),n.im=t.r*Math.sin(t.phi)}else t.length===2?(n.re=t[0],n.im=t[1]):M();break;case"string":n.im=n.re=0;const r=t.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let i=1,a=0;r===null&&M();for(let c=0;c<r.length;c++){const l=r[c];l===" "||l==="	"||l===`
`||(l==="+"?i++:l==="-"?a++:l==="i"||l==="I"?(i+a===0&&M(),r[c+1]!==" "&&!isNaN(r[c+1])?(n.im+=parseFloat((a%2?"-":"")+r[c+1]),c++):n.im+=parseFloat((a%2?"-":"")+"1"),i=a=0):((i+a===0||isNaN(l))&&M(),r[c+1]==="i"||r[c+1]==="I"?(n.im+=parseFloat((a%2?"-":"")+l),c++):n.re+=parseFloat((a%2?"-":"")+l),i=a=0))}i+a>0&&M();break;case"number":n.im=0,n.re=t;break;default:M()}return isNaN(n.re)||isNaN(n.im),n};function o(t,e){if(!(this instanceof o))return new o(t,e);const n=p(t,e);this.re=n.re,this.im=n.im}o.prototype={re:0,im:0,sign:function(){const t=S(this.re,this.im);return new o(this.re/t,this.im/t)},add:function(t,e){const n=p(t,e),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im));return r||i?r&&i?o.NAN:o.INFINITY:new o(this.re+n.re,this.im+n.im)},sub:function(t,e){const n=p(t,e),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im));return r||i?r&&i?o.NAN:o.INFINITY:new o(this.re-n.re,this.im-n.im)},mul:function(t,e){const n=p(t,e),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im)),a=this.re===0&&this.im===0,c=n.re===0&&n.im===0;return r&&c||i&&a?o.NAN:r||i?o.INFINITY:n.im===0&&this.im===0?new o(this.re*n.re,0):new o(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(t,e){const n=p(t,e),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im)),a=this.re===0&&this.im===0,c=n.re===0&&n.im===0;if(a&&c||r&&i)return o.NAN;if(c||r)return o.INFINITY;if(a||i)return o.ZERO;if(n.im===0)return new o(this.re/n.re,this.im/n.re);if(Math.abs(n.re)<Math.abs(n.im)){const l=n.re/n.im,u=n.re*l+n.im;return new o((this.re*l+this.im)/u,(this.im*l-this.re)/u)}else{const l=n.im/n.re,u=n.im*l+n.re;return new o((this.re+this.im*l)/u,(this.im-this.re*l)/u)}},pow:function(t,e){const n=p(t,e),r=this.re===0&&this.im===0;if(n.re===0&&n.im===0)return o.ONE;if(n.im===0){if(this.im===0&&this.re>0)return new o(Math.pow(this.re,n.re),0);if(this.re===0)switch((n.re%4+4)%4){case 0:return new o(Math.pow(this.im,n.re),0);case 1:return new o(0,Math.pow(this.im,n.re));case 2:return new o(-Math.pow(this.im,n.re),0);case 3:return new o(0,-Math.pow(this.im,n.re))}}if(r&&n.re>0)return o.ZERO;const a=Math.atan2(this.im,this.re),c=q(this.re,this.im);let l=Math.exp(n.re*c-n.im*a),u=n.im*c+n.re*a;return new o(l*Math.cos(u),l*Math.sin(u))},sqrt:function(){const t=this.re,e=this.im;if(e===0)return t>=0?new o(Math.sqrt(t),0):new o(0,Math.sqrt(-t));const n=S(t,e);let r=Math.sqrt(.5*(n+Math.abs(t))),i=Math.abs(e)/(2*r);return t>=0?new o(r,e<0?-i:i):new o(i,e<0?-r:r)},exp:function(){const t=Math.exp(this.re);return this.im===0?new o(t,0):new o(t*Math.cos(this.im),t*Math.sin(this.im))},expm1:function(){const t=this.re,e=this.im;return new o(Math.expm1(t)*Math.cos(e)+W(e),Math.exp(t)*Math.sin(e))},log:function(){const t=this.re,e=this.im;return e===0&&t>0?new o(Math.log(t),0):new o(q(t,e),Math.atan2(e,t))},abs:function(){return S(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const t=this.re,e=this.im;return new o(Math.sin(t)*d(e),Math.cos(t)*m(e))},cos:function(){const t=this.re,e=this.im;return new o(Math.cos(t)*d(e),-Math.sin(t)*m(e))},tan:function(){const t=2*this.re,e=2*this.im,n=Math.cos(t)+d(e);return new o(Math.sin(t)/n,m(e)/n)},cot:function(){const t=2*this.re,e=2*this.im,n=Math.cos(t)-d(e);return new o(-Math.sin(t)/n,m(e)/n)},sec:function(){const t=this.re,e=this.im,n=.5*d(2*e)+.5*Math.cos(2*t);return new o(Math.cos(t)*d(e)/n,Math.sin(t)*m(e)/n)},csc:function(){const t=this.re,e=this.im,n=.5*d(2*e)-.5*Math.cos(2*t);return new o(Math.sin(t)*d(e)/n,-Math.cos(t)*m(e)/n)},asin:function(){const t=this.re,e=this.im,n=new o(e*e-t*t+1,-2*t*e).sqrt(),r=new o(n.re-e,n.im+t).log();return new o(r.im,-r.re)},acos:function(){const t=this.re,e=this.im,n=new o(e*e-t*t+1,-2*t*e).sqrt(),r=new o(n.re-e,n.im+t).log();return new o(Math.PI/2-r.im,r.re)},atan:function(){const t=this.re,e=this.im;if(t===0){if(e===1)return new o(0,1/0);if(e===-1)return new o(0,-1/0)}const n=t*t+(1-e)*(1-e),r=new o((1-e*e-t*t)/n,-2*t/n).log();return new o(-.5*r.im,.5*r.re)},acot:function(){const t=this.re,e=this.im;if(e===0)return new o(Math.atan2(1,t),0);const n=t*t+e*e;return n!==0?new o(t/n,-e/n).atan():new o(t!==0?t/0:0,e!==0?-e/0:0).atan()},asec:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new o(0,1/0);const n=t*t+e*e;return n!==0?new o(t/n,-e/n).acos():new o(t!==0?t/0:0,e!==0?-e/0:0).acos()},acsc:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new o(Math.PI/2,1/0);const n=t*t+e*e;return n!==0?new o(t/n,-e/n).asin():new o(t!==0?t/0:0,e!==0?-e/0:0).asin()},sinh:function(){const t=this.re,e=this.im;return new o(m(t)*Math.cos(e),d(t)*Math.sin(e))},cosh:function(){const t=this.re,e=this.im;return new o(d(t)*Math.cos(e),m(t)*Math.sin(e))},tanh:function(){const t=2*this.re,e=2*this.im,n=d(t)+Math.cos(e);return new o(m(t)/n,Math.sin(e)/n)},coth:function(){const t=2*this.re,e=2*this.im,n=d(t)-Math.cos(e);return new o(m(t)/n,-Math.sin(e)/n)},csch:function(){const t=this.re,e=this.im,n=Math.cos(2*e)-d(2*t);return new o(-2*m(t)*Math.cos(e)/n,2*d(t)*Math.sin(e)/n)},sech:function(){const t=this.re,e=this.im,n=Math.cos(2*e)+d(2*t);return new o(2*d(t)*Math.cos(e)/n,-2*m(t)*Math.sin(e)/n)},asinh:function(){let t=this.im;this.im=-this.re,this.re=t;const e=this.asin();return this.re=-this.im,this.im=t,t=e.re,e.re=-e.im,e.im=t,e},acosh:function(){const t=this.acos();if(t.im<=0){const e=t.re;t.re=-t.im,t.im=e}else{const e=t.im;t.im=-t.re,t.re=e}return t},atanh:function(){const t=this.re,e=this.im,n=t>1&&e===0,r=1-t,i=1+t,a=r*r+e*e,c=a!==0?new o((i*r-e*e)/a,(e*r+i*e)/a):new o(t!==-1?t/0:0,e!==0?e/0:0),l=c.re;return c.re=q(c.re,c.im)/2,c.im=Math.atan2(c.im,l)/2,n&&(c.im=-c.im),c},acoth:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new o(0,Math.PI/2);const n=t*t+e*e;return n!==0?new o(t/n,-e/n).atanh():new o(t!==0?t/0:0,e!==0?-e/0:0).atanh()},acsch:function(){const t=this.re,e=this.im;if(e===0)return new o(t!==0?Math.log(t+Math.sqrt(t*t+1)):1/0,0);const n=t*t+e*e;return n!==0?new o(t/n,-e/n).asinh():new o(t!==0?t/0:0,e!==0?-e/0:0).asinh()},asech:function(){const t=this.re,e=this.im;if(this.isZero())return o.INFINITY;const n=t*t+e*e;return n!==0?new o(t/n,-e/n).acosh():new o(t!==0?t/0:0,e!==0?-e/0:0).acosh()},inverse:function(){if(this.isZero())return o.INFINITY;if(this.isInfinite())return o.ZERO;const t=this.re,e=this.im,n=t*t+e*e;return new o(t/n,-e/n)},conjugate:function(){return new o(this.re,-this.im)},neg:function(){return new o(-this.re,-this.im)},ceil:function(t){return t=Math.pow(10,t||0),new o(Math.ceil(this.re*t)/t,Math.ceil(this.im*t)/t)},floor:function(t){return t=Math.pow(10,t||0),new o(Math.floor(this.re*t)/t,Math.floor(this.im*t)/t)},round:function(t){return t=Math.pow(10,t||0),new o(Math.round(this.re*t)/t,Math.round(this.im*t)/t)},equals:function(t,e){const n=p(t,e);return Math.abs(n.re-this.re)<=o.EPSILON&&Math.abs(n.im-this.im)<=o.EPSILON},clone:function(){return new o(this.re,this.im)},toString:function(){let t=this.re,e=this.im,n="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(t)<o.EPSILON&&(t=0),Math.abs(e)<o.EPSILON&&(e=0),e===0?n+t:(t!==0?(n+=t,n+=" ",e<0?(e=-e,n+="-"):n+="+",n+=" "):e<0&&(e=-e,n+="-"),e!==1&&(n+=e),n+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};o.ZERO=new o(0,0);o.ONE=new o(1,0);o.I=new o(0,1);o.PI=new o(Math.PI,0);o.E=new o(Math.E,0);o.INFINITY=new o(1/0,1/0);o.NAN=new o(NaN,NaN);o.EPSILON=1e-15;const s={bd:null,result:0,expression:"",equalPressed:0,idEnEdicion:null,memoryContainer:null,valorOriginalMemoria:0,idUltimoResultado:null},K=document.querySelector(".btnGuardar");function _(t){if(!t.bd||!t.memoryContainer)return;const r=t.bd.transaction("numero","readonly").objectStore("numero").openCursor();r.onsuccess=i=>{const a=i.target.result;if(a){const c=document.createElement("div");c.textContent=`Número: ${a.value.numero}`,t.memoryContainer.appendChild(c),a.continue()}Y()}}function U(){s.memoryContainer=document.querySelector("#Memory"),K.addEventListener("click",F);const t=indexedDB.open("Resultado-y-operaciones");t.addEventListener("error",nt),t.addEventListener("success",rt),t.addEventListener("upgradeneeded",Q)}function Q(t){const n=t.target.result.createObjectStore("numero",{keyPath:"id",autoIncrement:!0});n.createIndex("ecuacion","ecuacion",{unique:!1}),n.createIndex("resultado","resultado",{unique:!1})}function F(){if(!s.expression||s.expression.trim()===""){alert("No puedes guardar una ecuación vacía.");return}const e=s.bd.transaction(["numero"],"readwrite").objectStore("numero");let n;s.idEnEdicion!==null?(n=e.put({id:s.idEnEdicion,ecuacion:s.expression,resultado:s.result}),s.idEnEdicion=null):n=e.add({ecuacion:s.expression,resultado:s.result}),n.onsuccess=r=>{s.idUltimoResultado=r.target.result,b()},input.value="",s.expression="",s.result=""}function b(){s.memoryContainer.innerHTML="";const n=s.bd.transaction(["numero"],"readonly").objectStore("numero").openCursor();n.onsuccess=r=>{const i=r.target.result,a=i.value.id;if(i){const c=document.createElement("div");c.className="contenido",c.dataset.id=i.value.id,c.innerHTML=`
                <div class="Flex-space">
                    <strong>Ecuación:</strong> <div class="ecuacionn">${i.value.ecuacion}</div>
                </div>
                <div class="Flex-space">
                    <strong>Resultado:</strong> <div class="resultadoo">${i.value.resultado}</div>
                </div>
                <div class="Flex">
                    <button class="borrar">Borrar</button>
                    <button class="Mmas">M+</button>
                    <button class="Mmenos">M-</button>
                    <button class="editarr">Editar</button>
                </div>
            `,c.querySelector(".borrar").addEventListener("click",()=>et(a)),c.querySelector(".editarr").addEventListener("click",()=>tt(a)),s.memoryContainer.appendChild(c),i.continue()}}}function tt(t){const r=s.bd.transaction(["numero"],"readonly").objectStore("numero").get(t);r.onsuccess=()=>{const i=r.result;i&&(s.idEnEdicion=t,input.value=i.ecuacion,s.expression=i.ecuacion,s.result=i.resultado)}}function et(t){const e=s.bd.transaction(["numero"],"readwrite");e.objectStore("numero").delete(t),e.addEventListener("complete",b)}function k(){const t=s.bd.transaction(["numero"],"readwrite");t.objectStore("numero").clear(),t.addEventListener("complete",b)}function nt(t){console.error("Error en IndexedDB",t)}function rt(t){s.bd=t.target.result,b(),Y();function e(n,r){if(!s.bd)return;const a=s.bd.transaction(["numero"],"readwrite").objectStore("numero"),c=a.get(n);c.onsuccess=l=>{const u=l.target.result;if(!u)return;u.resultadoOriginal===void 0&&(u.resultadoOriginal=Math.abs(Number(u.resultado)));let N=Number(u.resultado);r==="sumar"&&(N+=Number(input.value)),r==="restar"&&(N-=Number(input.value)),u.resultado=N;const V=a.put(u);V.onsuccess=()=>{const B=s.memoryContainer.querySelector(`.contenido[data-id='${n}'] .resultadoo`);B&&(B.textContent=u.resultado)}}}document.addEventListener("click",n=>{const r=n.target;if(r.classList.contains("Mmas")){const i=r.closest(".contenido");if(!i||!i.dataset.id)return;const a=Number(i.dataset.id);e(a,"sumar")}if(r.classList.contains("Mmenos")){const i=r.closest(".contenido");if(!i||!i.dataset.id)return;const a=Number(i.dataset.id);e(a,"restar")}})}function Y(){const n=s.bd.transaction(["numero"],"readonly").objectStore("numero").openCursor(null,"prev");n.onsuccess=r=>{const i=r.target.result;i?(s.valorOriginalMemoria=parseFloat(i.value.resultado),s.idUltimoResultado=i.value.id):(s.valorOriginalMemoria=0,s.idUltimoResultado=null)},n.onerror=r=>{console.error("Error al obtener último resultado",r),s.valorOriginalMemoria=0,s.idUltimoResultado=null}}function R(){if(s.idUltimoResultado===null)return;const t=s.bd.transaction(["numero"],"readwrite"),e=t.objectStore("numero"),n=e.get(s.idUltimoResultado);n.onsuccess=()=>{const r=n.result,i=parseFloat(r.resultado)+Number(input.value);e.put({id:s.idUltimoResultado,ecuacion:r.ecuacion,resultado:i}),t.oncomplete=()=>b()}}function $(){if(s.idUltimoResultado===null)return;const t=s.bd.transaction(["numero"],"readwrite"),e=t.objectStore("numero"),n=e.get(s.idUltimoResultado);n.onsuccess=()=>{const r=n.result,i=parseFloat(r.resultado)-Number(input.value);e.put({id:s.idUltimoResultado,ecuacion:r.ecuacion,resultado:i}),t.oncomplete=()=>b()}}globalMPlus.addEventListener("click",R);globalMMinus.addEventListener("click",$);btnRecuperarMemoria.addEventListener("click",A);function A(){const n=s.bd.transaction(["numero"],"readonly").objectStore("numero").openCursor(null,"prev");n.onsuccess=r=>{const i=r.target.result;i?(input.value=i.value.resultado,console.log("Memoria recuperada:",i.value.resultado,"de ecuación:",i.value.ecuacion)):console.log("No hay memoria en IndexedDB")},n.onerror=r=>{console.error("Error al recuperar memoria:",r)}}window.addEventListener("load",U);const O=document.querySelector("#btn-mr"),f=document.querySelector("#Memory"),v=document.querySelector(".style-A");v.addEventListener("click",k);O&&f&&O.addEventListener("click",()=>{f.style.display=f.style.display==="none"||f.style.display===""?"flex":"none"});const P=document.querySelector("#btn-mr1");P&&f&&P.addEventListener("click",()=>{f.style.display=f.style.display==="none"||f.style.display===""?"flex":"none"});const z=document.querySelector("#btn-mr2");z&&f&&z.addEventListener("click",t=>{v.style.display=v.style.display==="none"||v.style.display===""?"flex":"none",f.style.display=f.style.display==="none"||f.style.display===""?"flex":"none"});Math.sec=t=>1/Math.cos(t);Math.cot=t=>1/Math.tan(t);Math.csc=t=>1/Math.sin(t);Math.asec=t=>Math.acos(1/t);Math.acot=t=>Math.atan(1/t);Math.acsc=t=>Math.asin(1/t);Math.sech=t=>1/Math.cosh(t);Math.coth=t=>1/Math.tanh(t);Math.csch=t=>1/Math.sinh(t);Math.acoth=t=>.5*Math.log((t+1)/(t-1));Math.asech=t=>Math.log((1+Math.sqrt(1-t*t))/t);Math.acsch=t=>Math.log(1/t+Math.sqrt(1+1/(t*t)));Math.logxy=(t,e)=>Math.log(t)/Math.log(e);Math.EXPT=(t,e)=>t*Math.pow(10,e);Math.mod=(t,e)=>(t%e+e)%e;Math.DEG=(t,e,n)=>t+e/60+n/3600;Math.DMS=t=>{const e=Math.floor(t),n=(t-e)*60,r=Math.floor(n),i=(n-r)*60;return`${e}° ${r}' ${i.toFixed(2)}"`};typeof Math.ln!="function"&&(Math.ln=t=>Math.log(t));function H(t){return t<=1?1:t*H(t-1)}function it(t){let e=t.replace(/(\d)(\()/g,"$1*$2");return e=e.replace(/(\))(\d)/g,"$1*$2"),e}let y=0;const g=document.getElementById("multiBtn");g&&g.addEventListener("click",()=>{switch(y){case 0:g.textContent="GRAD",y=1;break;case 1:g.textContent="DEG",y=2;break;case 2:g.textContent="RAD",y=0;break}});function ot(){var t;return((t=document.getElementById("multiBtn"))==null?void 0:t.textContent)??null}function st(t){const e=ot();return t.replace(/\b(sin|cos|tan|sec|csc|cot|asin|acos|atan|asec|acsc|acot)\s*\(([^)]+)\)/g,(n,r,i)=>{let a=i,c="";return r.startsWith("a")||(e==="DEG"&&(a=`(${i})*Math.PI/180`),e==="GRAD"&&(a=`(${i})*Math.PI/200`)),r.startsWith("a")&&(e==="DEG"&&(c="*180/Math.PI"),e==="GRAD"&&(c="*200/Math.PI")),`${r}(${a})${c}`})}const D=document.querySelector("#fBtn");let x=!1;D&&D.addEventListener("click",()=>{x=!x,console.log("F-E activado:",x)});window.raizCompleja=t=>t>=0?t**.5:new o(0,Math.sqrt(-t));window.raizCubicaCompleja=t=>t>=0?Math.cbrt(t):new o(t,0).pow(1/3);function at(t){try{const e=Function('"use strict"; return ('+t+")")();return console.log("Expresión evaluada:",t),e instanceof o?e.toString():String(e)}catch(e){return console.error("Error evaluando expresión:",e),"Syntax ERROR"}}function ct(t){let e=t;return e=e.replaceAll("pow(","Math.pow(").replaceAll("xylog(","Math.logxy(").replace(/(\d+\.?\d*)→dms/g,"Math.DMS($1)").replace(/(\d+),(\d+),(\d+)→deg/g,"Math.DEG($1,$2,$3)").replace(/²√(-?\d+(\.\d+)?)/g,(n,r)=>`raizCompleja(${r})`).replace(/∛(-?\d+(\.\d+)?)/g,(n,r)=>`raizCubicaCompleja(${r})`).replace(/yroot(\d+(\.\d+)?|\([^()]+\))/g,"Math.pow($1)").replaceAll("MOD(","Math.mod(").replace(/\bacoth\b/g,"Math.acoth").replace(/\bacsch\b/g,"Math.acsch").replace(/\basech\b/g,"Math.asech").replace(/\basin\b/g,"Math.asin").replace(/\bacos\b/g,"Math.acos").replace(/\batan\b/g,"Math.atan").replace(/\basec\b/g,"Math.asec").replace(/\bacsc\b/g,"Math.acsc").replace(/\bacot\b/g,"Math.acot").replace(/\basinh\b/g,"Math.asinh").replace(/\bacosh\b/g,"Math.acosh").replace(/\batanh\b/g,"Math.atanh").replace(/\bsinh\b/g,"Math.sinh").replace(/\bcosh\b/g,"Math.cosh").replace(/\btanh\b/g,"Math.tanh").replace(/\bcoth\b/g,"Math.coth").replace(/\bcsch\b/g,"Math.csch").replace(/\bsech\b/g,"Math.sech").replace(/\bsin\b/g,"Math.sin").replace(/\bcos\b/g,"Math.cos").replace(/\btan\b/g,"Math.tan").replace(/\bsec\b/g,"Math.sec").replace(/\bcot\b/g,"Math.cot").replaceAll("exp(","Math.EXPT(").replaceAll("²","**2").replaceAll("³","**3").replaceAll("^","**").replace(/-(\d+(\.\d+)?)\*\*/g,"(-$1)**").replace(/log\(/g,"Math.log10(").replace(/(^|[^a-zA-Z0-9_])e\^(\([^)]+\)|\d+(\.\d+)?)/g,(n,r,i)=>`${r}Math.exp(${i})`).replace(/(^|[^a-zA-Z0-9_])\be\b/g,(n,r)=>`${r}Math.E`).replaceAll("10^","10**").replaceAll("|x|","Math.abs(").replaceAll("⌊x⌋(","Math.floor(").replaceAll("⌈x⌉(","Math.ceil(").replace(/(\d+(\.\d+)?)%/g,(n,r)=>`(${r}*0.01)`).replace(/(\d+(\.\d+)?)%(\d+(\.\d+)?)/g,(n,r,i,a)=>`((${r}/${a})*100)`).replace(/(\d+)!/g,(n,r)=>H(Number(r)).toString()),e=st(e),e}function lt(){const t=document.querySelector("#input");t&&t.value!==""&&parseFloat(t.value)!==0?(t.value=(1/parseFloat(t.value)).toString(),s.expression=t.value):alert("Error: División entre 0")}function ut(){const t=document.querySelector("#input");if(!t)return;const e=t.value,n=/(-?\d+(\.\d+)?)(?!.*\d)/,r=e.match(n);if(r&&r.index!==void 0){const i=r[0],a=i.startsWith("-")?i.slice(1):"-"+i;t.value=e.slice(0,r.index)+a+e.slice(r.index+i.length),s.expression=t.value}}const T=document.querySelector(".basic"),Z=document.querySelector(".show-nt"),j=document.querySelector(".show-nt-grapic"),G=document.querySelector(".specialButtons");function E(t){switch(T.style.display="none",Z.style.display="none",j.style.display="none",G.style.display="none",t){case"basic":T.style.display="flex";break;case"sci":Z.style.display="flex",G.style.display="flex";break;case"graphic":j.style.display="flex";break}}E("basic");function dt(t){const e=`0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVW⌊⌋XYZ+-*/=!^⌈.⌉,|→π²³√()%∛°'"`;for(let i=0;i<t.length;i++)if(!e.includes(t[i]))return{valido:!1,error:`Carácter inválido: "${t[i]}"`};const n=/[a-zA-Z]+|\d+(\.\d+)?|['"]|[%+\-*/^=()]/g,r=t.match(n);return!r||r.length===0?{valido:!1,error:"Ecuación vacía o inválida"}:{valido:!0,tokens:r}}function ht(t){const e=dt(t);return e.valido?!0:(alert("Error: "+e.error),!1)}const w=document.querySelector("#input"),I=document.querySelector("#historyContent");function mt(t,e,n){if(!I)return;const r=document.createElement("div");r.className="history-item",s.result=n,s.expression=e;const i=document.createElement("span"),a=n!=null?n.toString():"";i.textContent=`${e} = ${a}`,i.dataset.userResult=a,i.style.cursor="pointer",i.dataset.userInput=e,i.dataset.userResult=a,i.addEventListener("click",()=>{w&&(w.value=i.dataset.userInput??"")}),r.appendChild(i),r.dataset.idi=t.toString();const c=document.createElement("button");c.textContent="Eliminar",c.className="delete-history",c.addEventListener("click",()=>{J(Number(r.dataset.idi)),r.remove()}),r.appendChild(c),I.appendChild(r),ft(t,e,n)}function ft(t,e,n){const r=JSON.parse(localStorage.getItem("historial")||"[]");r.push({idi:t,expression:e,result:n}),localStorage.setItem("historial",JSON.stringify(r))}function pt(){JSON.parse(localStorage.getItem("historial")||"[]").forEach(e=>Mt(e.idi,e.expression,e.result))}function Mt(t,e,n){if(!I)return;const r=document.createElement("div");r.className="history-item",s.result=n,s.expression=e;const i=document.createElement("span"),a=n!=null?n.toString():"";i.textContent=`${e} = ${a}`,i.dataset.userResult=a,i.style.cursor="pointer",i.dataset.userInput=e,i.dataset.userResult=a,i.addEventListener("click",()=>{w&&(w.value=i.dataset.userInput??"")}),r.appendChild(i);const c=document.createElement("button");c.textContent="Eliminar",c.className="delete-history",c.addEventListener("click",()=>{J(Number(r.dataset.idi)),r.remove()}),r.appendChild(c),r.dataset.idi=t.toString(),I.appendChild(r)}function J(t){const n=JSON.parse(localStorage.getItem("historial")||"[]").filter(r=>r.idi!==t);localStorage.setItem("historial",JSON.stringify(n))}function bt(t,e){const n=Date.now()+Math.random();mt(n,t,e)}window.addEventListener("load",()=>{pt()});const gt=document.querySelectorAll(".button"),h=document.getElementById("input");document.getElementById("equal");document.getElementById("clear");document.getElementById("erase");document.getElementById("historyContent");document.querySelector("#btn-mr");document.querySelector("#Memory");document.getElementById("multiBtn");document.querySelector("#fBtn");document.querySelector("#globalMPlus");document.querySelector("#globalMMinus");document.querySelector("#btnRecuperarMemoria");const yt=document.querySelector("#menuHamburger"),L=document.querySelector(".sidebar"),vt=document.querySelector("#btnBasic"),wt=document.querySelector("#btnScientific"),It=document.querySelector("#btnGraphic");yt.addEventListener("click",()=>{L.style.display=L.style.display==="none"||L.style.display===""?"flex":"none"});vt.addEventListener("click",()=>E("basic"));wt.addEventListener("click",()=>E("sci"));It.addEventListener("click",()=>E("graphic"));const Et=[{btnId:"clickk",panelId:"presionar"},{btnId:"clickk1",panelId:"presionar1"}],Nt=[{id:"equal",handler:C},{id:"equal1",handler:C},{id:"deleteAll",handler:k},{id:"restoreMemory",handler:A},{id:"memoryM",handler:R},{id:"memoryMe",handler:$},{id:"saveMemory",handler:F},{id:"equal2",handler:C},{id:"deleteAll1",handler:k},{id:"restoreMemory1",handler:A},{id:"memoryM1",handler:R},{id:"memoryMe1",handler:$},{id:"saveMemory1",handler:F}];Nt.forEach(t=>{const e=document.getElementById(t.id);e&&e.addEventListener("click",t.handler)});Et.forEach(t=>{const e=document.getElementById(t.btnId),n=document.getElementById(t.panelId);e&&n&&e.addEventListener("click",()=>n.classList.toggle("memoryButton"))});window.onload=()=>{h.value="",s.expression="",s.result="",s.bd&&s.memoryContainer&&_(s)};window.addEventListener("load",()=>{h.value="",s.expression="",s.result="",s.bd&&s.memoryContainer&&_(s)});window.addEventListener("load",()=>{U()});gt.forEach(t=>{t.addEventListener("click",e=>{s.equalPressed&&(s.equalPressed=0);const r=e.target.dataset.number??"";switch(r){case"AC":h.value="",s.expression="";break;case"DEL":h.value=h.value.slice(0,-1),s.expression=h.value;break;case"+/-":ut(),s.expression=h.value;break;case"1/":lt(),s.expression=h.value;break;default:h.value+=r,s.expression=h.value}})});typeof Math.log10!="function"&&(Math.log10=function(t){return Math.log(t)/Math.log(10)});function C(){try{s.equalPressed=1;const t=h.value;let e=t;if(s.expression=t,!ht(t))return;e=ct(t),e=it(e);const n=at(e);s.result=n,St(n),bt(s.expression,s.result)}catch(t){t instanceof Error?alert("Error: "+t.message):alert("Error desconocido")}}function St(t){typeof t=="string"?h.value=t:h.value=Number.isInteger(t)?t.toString():t.toFixed(2)}
