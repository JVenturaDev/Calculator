(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();const b=document.querySelector(".scroll1"),x=document.querySelector(".memory-mobile"),C=document.querySelector(".workspace");function H(){window.innerWidth<=500?x&&b&&!x.contains(b)&&x.appendChild(b):C&&b&&!C.contains(b)&&C.appendChild(b)}const d=Math.cosh||function(e){return Math.abs(e)<1e-9?1-e:(Math.exp(e)+Math.exp(-e))*.5},m=Math.sinh||function(e){return Math.abs(e)<1e-9?e:(Math.exp(e)-Math.exp(-e))*.5},te=function(e){const t=Math.PI/4;if(-t>e||e>t)return Math.cos(e)-1;const n=e*e;return n*(n*(n*(n*(n*(n*(n*(n/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},L=function(e,t){return e=Math.abs(e),t=Math.abs(t),e<t&&([e,t]=[t,e]),e<1e8?Math.sqrt(e*e+t*t):(t/=e,e*Math.sqrt(1+t*t))},y=function(){throw SyntaxError("Invalid Param")};function F(e,t){const n=Math.abs(e),r=Math.abs(t);return e===0?Math.log(r):t===0?Math.log(n):n<3e3&&r<3e3?Math.log(e*e+t*t)*.5:(e=e*.5,t=t*.5,.5*Math.log(e*e+t*t)+Math.LN2)}const ne={re:0,im:0},M=function(e,t){const n=ne;if(e==null)n.re=n.im=0;else if(t!==void 0)n.re=e,n.im=t;else switch(typeof e){case"object":if("im"in e&&"re"in e)n.re=e.re,n.im=e.im;else if("abs"in e&&"arg"in e){if(!isFinite(e.abs)&&isFinite(e.arg))return o.INFINITY;n.re=e.abs*Math.cos(e.arg),n.im=e.abs*Math.sin(e.arg)}else if("r"in e&&"phi"in e){if(!isFinite(e.r)&&isFinite(e.phi))return o.INFINITY;n.re=e.r*Math.cos(e.phi),n.im=e.r*Math.sin(e.phi)}else e.length===2?(n.re=e[0],n.im=e[1]):y();break;case"string":n.im=n.re=0;const r=e.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let i=1,a=0;r===null&&y();for(let c=0;c<r.length;c++){const l=r[c];l===" "||l==="	"||l===`
`||(l==="+"?i++:l==="-"?a++:l==="i"||l==="I"?(i+a===0&&y(),r[c+1]!==" "&&!isNaN(r[c+1])?(n.im+=parseFloat((a%2?"-":"")+r[c+1]),c++):n.im+=parseFloat((a%2?"-":"")+"1"),i=a=0):((i+a===0||isNaN(l))&&y(),r[c+1]==="i"||r[c+1]==="I"?(n.im+=parseFloat((a%2?"-":"")+l),c++):n.re+=parseFloat((a%2?"-":"")+l),i=a=0))}i+a>0&&y();break;case"number":n.im=0,n.re=e;break;default:y()}return isNaN(n.re)||isNaN(n.im),n};function o(e,t){if(!(this instanceof o))return new o(e,t);const n=M(e,t);this.re=n.re,this.im=n.im}o.prototype={re:0,im:0,sign:function(){const e=L(this.re,this.im);return new o(this.re/e,this.im/e)},add:function(e,t){const n=M(e,t),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im));return r||i?r&&i?o.NAN:o.INFINITY:new o(this.re+n.re,this.im+n.im)},sub:function(e,t){const n=M(e,t),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im));return r||i?r&&i?o.NAN:o.INFINITY:new o(this.re-n.re,this.im-n.im)},mul:function(e,t){const n=M(e,t),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im)),a=this.re===0&&this.im===0,c=n.re===0&&n.im===0;return r&&c||i&&a?o.NAN:r||i?o.INFINITY:n.im===0&&this.im===0?new o(this.re*n.re,0):new o(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(e,t){const n=M(e,t),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im)),a=this.re===0&&this.im===0,c=n.re===0&&n.im===0;if(a&&c||r&&i)return o.NAN;if(c||r)return o.INFINITY;if(a||i)return o.ZERO;if(n.im===0)return new o(this.re/n.re,this.im/n.re);if(Math.abs(n.re)<Math.abs(n.im)){const l=n.re/n.im,u=n.re*l+n.im;return new o((this.re*l+this.im)/u,(this.im*l-this.re)/u)}else{const l=n.im/n.re,u=n.im*l+n.re;return new o((this.re+this.im*l)/u,(this.im-this.re*l)/u)}},pow:function(e,t){const n=M(e,t),r=this.re===0&&this.im===0;if(n.re===0&&n.im===0)return o.ONE;if(n.im===0){if(this.im===0&&this.re>0)return new o(Math.pow(this.re,n.re),0);if(this.re===0)switch((n.re%4+4)%4){case 0:return new o(Math.pow(this.im,n.re),0);case 1:return new o(0,Math.pow(this.im,n.re));case 2:return new o(-Math.pow(this.im,n.re),0);case 3:return new o(0,-Math.pow(this.im,n.re))}}if(r&&n.re>0)return o.ZERO;const a=Math.atan2(this.im,this.re),c=F(this.re,this.im);let l=Math.exp(n.re*c-n.im*a),u=n.im*c+n.re*a;return new o(l*Math.cos(u),l*Math.sin(u))},sqrt:function(){const e=this.re,t=this.im;if(t===0)return e>=0?new o(Math.sqrt(e),0):new o(0,Math.sqrt(-e));const n=L(e,t);let r=Math.sqrt(.5*(n+Math.abs(e))),i=Math.abs(t)/(2*r);return e>=0?new o(r,t<0?-i:i):new o(i,t<0?-r:r)},exp:function(){const e=Math.exp(this.re);return this.im===0?new o(e,0):new o(e*Math.cos(this.im),e*Math.sin(this.im))},expm1:function(){const e=this.re,t=this.im;return new o(Math.expm1(e)*Math.cos(t)+te(t),Math.exp(e)*Math.sin(t))},log:function(){const e=this.re,t=this.im;return t===0&&e>0?new o(Math.log(e),0):new o(F(e,t),Math.atan2(t,e))},abs:function(){return L(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const e=this.re,t=this.im;return new o(Math.sin(e)*d(t),Math.cos(e)*m(t))},cos:function(){const e=this.re,t=this.im;return new o(Math.cos(e)*d(t),-Math.sin(e)*m(t))},tan:function(){const e=2*this.re,t=2*this.im,n=Math.cos(e)+d(t);return new o(Math.sin(e)/n,m(t)/n)},cot:function(){const e=2*this.re,t=2*this.im,n=Math.cos(e)-d(t);return new o(-Math.sin(e)/n,m(t)/n)},sec:function(){const e=this.re,t=this.im,n=.5*d(2*t)+.5*Math.cos(2*e);return new o(Math.cos(e)*d(t)/n,Math.sin(e)*m(t)/n)},csc:function(){const e=this.re,t=this.im,n=.5*d(2*t)-.5*Math.cos(2*e);return new o(Math.sin(e)*d(t)/n,-Math.cos(e)*m(t)/n)},asin:function(){const e=this.re,t=this.im,n=new o(t*t-e*e+1,-2*e*t).sqrt(),r=new o(n.re-t,n.im+e).log();return new o(r.im,-r.re)},acos:function(){const e=this.re,t=this.im,n=new o(t*t-e*e+1,-2*e*t).sqrt(),r=new o(n.re-t,n.im+e).log();return new o(Math.PI/2-r.im,r.re)},atan:function(){const e=this.re,t=this.im;if(e===0){if(t===1)return new o(0,1/0);if(t===-1)return new o(0,-1/0)}const n=e*e+(1-t)*(1-t),r=new o((1-t*t-e*e)/n,-2*e/n).log();return new o(-.5*r.im,.5*r.re)},acot:function(){const e=this.re,t=this.im;if(t===0)return new o(Math.atan2(1,e),0);const n=e*e+t*t;return n!==0?new o(e/n,-t/n).atan():new o(e!==0?e/0:0,t!==0?-t/0:0).atan()},asec:function(){const e=this.re,t=this.im;if(e===0&&t===0)return new o(0,1/0);const n=e*e+t*t;return n!==0?new o(e/n,-t/n).acos():new o(e!==0?e/0:0,t!==0?-t/0:0).acos()},acsc:function(){const e=this.re,t=this.im;if(e===0&&t===0)return new o(Math.PI/2,1/0);const n=e*e+t*t;return n!==0?new o(e/n,-t/n).asin():new o(e!==0?e/0:0,t!==0?-t/0:0).asin()},sinh:function(){const e=this.re,t=this.im;return new o(m(e)*Math.cos(t),d(e)*Math.sin(t))},cosh:function(){const e=this.re,t=this.im;return new o(d(e)*Math.cos(t),m(e)*Math.sin(t))},tanh:function(){const e=2*this.re,t=2*this.im,n=d(e)+Math.cos(t);return new o(m(e)/n,Math.sin(t)/n)},coth:function(){const e=2*this.re,t=2*this.im,n=d(e)-Math.cos(t);return new o(m(e)/n,-Math.sin(t)/n)},csch:function(){const e=this.re,t=this.im,n=Math.cos(2*t)-d(2*e);return new o(-2*m(e)*Math.cos(t)/n,2*d(e)*Math.sin(t)/n)},sech:function(){const e=this.re,t=this.im,n=Math.cos(2*t)+d(2*e);return new o(2*d(e)*Math.cos(t)/n,-2*m(e)*Math.sin(t)/n)},asinh:function(){let e=this.im;this.im=-this.re,this.re=e;const t=this.asin();return this.re=-this.im,this.im=e,e=t.re,t.re=-t.im,t.im=e,t},acosh:function(){const e=this.acos();if(e.im<=0){const t=e.re;e.re=-e.im,e.im=t}else{const t=e.im;e.im=-e.re,e.re=t}return e},atanh:function(){const e=this.re,t=this.im,n=e>1&&t===0,r=1-e,i=1+e,a=r*r+t*t,c=a!==0?new o((i*r-t*t)/a,(t*r+i*t)/a):new o(e!==-1?e/0:0,t!==0?t/0:0),l=c.re;return c.re=F(c.re,c.im)/2,c.im=Math.atan2(c.im,l)/2,n&&(c.im=-c.im),c},acoth:function(){const e=this.re,t=this.im;if(e===0&&t===0)return new o(0,Math.PI/2);const n=e*e+t*t;return n!==0?new o(e/n,-t/n).atanh():new o(e!==0?e/0:0,t!==0?-t/0:0).atanh()},acsch:function(){const e=this.re,t=this.im;if(t===0)return new o(e!==0?Math.log(e+Math.sqrt(e*e+1)):1/0,0);const n=e*e+t*t;return n!==0?new o(e/n,-t/n).asinh():new o(e!==0?e/0:0,t!==0?-t/0:0).asinh()},asech:function(){const e=this.re,t=this.im;if(this.isZero())return o.INFINITY;const n=e*e+t*t;return n!==0?new o(e/n,-t/n).acosh():new o(e!==0?e/0:0,t!==0?-t/0:0).acosh()},inverse:function(){if(this.isZero())return o.INFINITY;if(this.isInfinite())return o.ZERO;const e=this.re,t=this.im,n=e*e+t*t;return new o(e/n,-t/n)},conjugate:function(){return new o(this.re,-this.im)},neg:function(){return new o(-this.re,-this.im)},ceil:function(e){return e=Math.pow(10,e||0),new o(Math.ceil(this.re*e)/e,Math.ceil(this.im*e)/e)},floor:function(e){return e=Math.pow(10,e||0),new o(Math.floor(this.re*e)/e,Math.floor(this.im*e)/e)},round:function(e){return e=Math.pow(10,e||0),new o(Math.round(this.re*e)/e,Math.round(this.im*e)/e)},equals:function(e,t){const n=M(e,t);return Math.abs(n.re-this.re)<=o.EPSILON&&Math.abs(n.im-this.im)<=o.EPSILON},clone:function(){return new o(this.re,this.im)},toString:function(){let e=this.re,t=this.im,n="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(e)<o.EPSILON&&(e=0),Math.abs(t)<o.EPSILON&&(t=0),t===0?n+e:(e!==0?(n+=e,n+=" ",t<0?(t=-t,n+="-"):n+="+",n+=" "):t<0&&(t=-t,n+="-"),t!==1&&(n+=t),n+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};o.ZERO=new o(0,0);o.ONE=new o(1,0);o.I=new o(0,1);o.PI=new o(Math.PI,0);o.E=new o(Math.E,0);o.INFINITY=new o(1/0,1/0);o.NAN=new o(NaN,NaN);o.EPSILON=1e-15;const s={bd:null,result:0,expression:"",equalPressed:0,idEnEdicion:null,memoryContainer:null,valorOriginalMemoria:0,idUltimoResultado:null},re=document.querySelector(".btnGuardar");function J(e){if(!e.bd||!e.memoryContainer)return;const r=e.bd.transaction("numero","readonly").objectStore("numero").openCursor();r.onsuccess=i=>{const a=i.target.result;if(a){const c=document.createElement("div");c.textContent=`Número: ${a.value.numero}`,e.memoryContainer.appendChild(c),a.continue()}W()}}function V(){s.memoryContainer=document.querySelector("#Memory"),re.addEventListener("click",$);const e=indexedDB.open("Resultado-y-operaciones");e.addEventListener("error",ae),e.addEventListener("success",ce),e.addEventListener("upgradeneeded",ie)}function ie(e){const n=e.target.result.createObjectStore("numero",{keyPath:"id",autoIncrement:!0});n.createIndex("ecuacion","ecuacion",{unique:!1}),n.createIndex("resultado","resultado",{unique:!1})}function $(){if(!s.expression||s.expression.trim()===""){alert("No puedes guardar una ecuación vacía.");return}const t=s.bd.transaction(["numero"],"readwrite").objectStore("numero");let n;s.idEnEdicion!==null?(n=t.put({id:s.idEnEdicion,ecuacion:s.expression,resultado:s.result}),s.idEnEdicion=null):n=t.add({ecuacion:s.expression,resultado:s.result}),n.onsuccess=r=>{s.idUltimoResultado=r.target.result,g()},input.value="",s.expression="",s.result=""}function g(){s.memoryContainer.innerHTML="";const n=s.bd.transaction(["numero"],"readonly").objectStore("numero").openCursor();n.onsuccess=r=>{const i=r.target.result,a=i.value.id;if(i){const c=document.createElement("div");c.className="contenido",c.dataset.id=i.value.id,c.innerHTML=`
                <div class="Flex-container">
                <div class="Flex-space">
                    <strong>Ecuación:</strong> <div class="ecuacionn">${i.value.ecuacion}</div>
                </div>
                <div class="Flex-space">
                    <strong>Resultado:</strong> <div class="resultadoo">${i.value.resultado}</div>
                </div>
                </div>
                <div class="Flex">
                <div class="Flex-left">
                    <button class="borrar"><span id="color-span1" class="material-symbols-outlined">
                                    delete
                                </span></button>
                    <button class="Mmas">M+</button>
                    <button class="Mmenos">M-</button>
                    <button class="editarr"><span class="material-symbols-outlined">
                                     edit
                    </span></button>
                </div>
                </div>
            `,c.querySelector(".borrar").addEventListener("click",()=>se(a)),c.querySelector(".editarr").addEventListener("click",()=>oe(a)),s.memoryContainer.appendChild(c),i.continue()}}}function oe(e){const r=s.bd.transaction(["numero"],"readonly").objectStore("numero").get(e);r.onsuccess=()=>{const i=r.result;i&&(s.idEnEdicion=e,input.value=i.ecuacion,s.expression=i.ecuacion,s.result=i.resultado)}}function se(e){const t=s.bd.transaction(["numero"],"readwrite");t.objectStore("numero").delete(e),t.addEventListener("complete",g)}function A(){const e=s.bd.transaction(["numero"],"readwrite");e.objectStore("numero").clear(),e.addEventListener("complete",g)}function ae(e){console.error("Error en IndexedDB",e)}function ce(e){s.bd=e.target.result,g(),W();function t(n,r){if(!s.bd)return;const a=s.bd.transaction(["numero"],"readwrite").objectStore("numero"),c=a.get(n);c.onsuccess=l=>{const u=l.target.result;if(!u)return;u.resultadoOriginal===void 0&&(u.resultadoOriginal=Math.abs(Number(u.resultado)));let q=Number(u.resultado);r==="sumar"&&(q+=Number(input.value)),r==="restar"&&(q-=Number(input.value)),u.resultado=q;const ee=a.put(u);ee.onsuccess=()=>{const z=s.memoryContainer.querySelector(`.contenido[data-id='${n}'] .resultadoo`);z&&(z.textContent=u.resultado)}}}document.addEventListener("click",n=>{const r=n.target;if(r.classList.contains("Mmas")){const i=r.closest(".contenido");if(!i||!i.dataset.id)return;const a=Number(i.dataset.id);t(a,"sumar")}if(r.classList.contains("Mmenos")){const i=r.closest(".contenido");if(!i||!i.dataset.id)return;const a=Number(i.dataset.id);t(a,"restar")}})}function W(){const n=s.bd.transaction(["numero"],"readonly").objectStore("numero").openCursor(null,"prev");n.onsuccess=r=>{const i=r.target.result;i?(s.valorOriginalMemoria=parseFloat(i.value.resultado),s.idUltimoResultado=i.value.id):(s.valorOriginalMemoria=0,s.idUltimoResultado=null)},n.onerror=r=>{console.error("Error al obtener último resultado",r),s.valorOriginalMemoria=0,s.idUltimoResultado=null}}function B(){if(s.idUltimoResultado===null)return;const e=s.bd.transaction(["numero"],"readwrite"),t=e.objectStore("numero"),n=t.get(s.idUltimoResultado);n.onsuccess=()=>{const r=n.result,i=parseFloat(r.resultado)+Number(input.value);t.put({id:s.idUltimoResultado,ecuacion:r.ecuacion,resultado:i}),e.oncomplete=()=>g()}}function O(){if(s.idUltimoResultado===null)return;const e=s.bd.transaction(["numero"],"readwrite"),t=e.objectStore("numero"),n=t.get(s.idUltimoResultado);n.onsuccess=()=>{const r=n.result,i=parseFloat(r.resultado)-Number(input.value);t.put({id:s.idUltimoResultado,ecuacion:r.ecuacion,resultado:i}),e.oncomplete=()=>g()}}globalMPlus.addEventListener("click",B);globalMMinus.addEventListener("click",O);btnRecuperarMemoria.addEventListener("click",P);function P(){const n=s.bd.transaction(["numero"],"readonly").objectStore("numero").openCursor(null,"prev");n.onsuccess=r=>{const i=r.target.result;i?(input.value=i.value.resultado,console.log("Memoria recuperada:",i.value.resultado,"de ecuación:",i.value.ecuacion)):console.log("No hay memoria en IndexedDB")},n.onerror=r=>{console.error("Error al recuperar memoria:",r)}}window.addEventListener("load",V);const D=document.querySelector("#btn-mr"),f=document.querySelector("#Memory"),p=document.querySelector(".style-A");p.addEventListener("click",A);D&&f&&D.addEventListener("click",()=>{p.style.display=p.style.display==="none"||p.style.display===""?"flex":"none",f.style.display=f.style.display==="none"||f.style.display===""?"flex":"none"});const T=document.querySelector("#btn-mr1");T&&f&&T.addEventListener("click",()=>{p.style.display=p.style.display==="none"||p.style.display===""?"flex":"none",f.style.display=f.style.display==="none"||f.style.display===""?"flex":"none"});const Z=document.querySelector("#btn-mr2");Z&&f&&Z.addEventListener("click",e=>{p.style.display=p.style.display==="none"||p.style.display===""?"flex":"none",f.style.display=f.style.display==="none"||f.style.display===""?"flex":"none"});const X=document.querySelector("#menuHamburger"),w=document.querySelector(".sidebar");X.addEventListener("click",()=>{w.style.display=w.style.display==="none"||w.style.display===""?"flex":"none"});document.addEventListener("click",e=>{const t=X.contains(e.target),n=w.contains(e.target);!t&&!n&&(w.style.display="none")});Math.sec=e=>1/Math.cos(e);Math.cot=e=>1/Math.tan(e);Math.csc=e=>1/Math.sin(e);Math.asec=e=>Math.acos(1/e);Math.acot=e=>Math.atan(1/e);Math.acsc=e=>Math.asin(1/e);Math.sech=e=>1/Math.cosh(e);Math.coth=e=>1/Math.tanh(e);Math.csch=e=>1/Math.sinh(e);Math.acoth=e=>.5*Math.log((e+1)/(e-1));Math.asech=e=>Math.log((1+Math.sqrt(1-e*e))/e);Math.acsch=e=>Math.log(1/e+Math.sqrt(1+1/(e*e)));Math.logxy=(e,t)=>Math.log(e)/Math.log(t);Math.EXPT=(e,t)=>e*Math.pow(10,t);Math.mod=(e,t)=>(e%t+t)%t;Math.DEG=(e,t,n)=>e+t/60+n/3600;Math.DMS=e=>{const t=Math.floor(e),n=(e-t)*60,r=Math.floor(n),i=(n-r)*60;return`${t}° ${r}' ${i.toFixed(2)}"`};typeof Math.ln!="function"&&(Math.ln=e=>Math.log(e));function K(e){return e<=1?1:e*K(e-1)}function le(e){let t=e.replace(/(\d)(\()/g,"$1*$2");return t=t.replace(/(\))(\d)/g,"$1*$2"),t}let I=0;const v=document.getElementById("multiBtn");v&&v.addEventListener("click",()=>{switch(I){case 0:v.textContent="GRAD",I=1;break;case 1:v.textContent="DEG",I=2;break;case 2:v.textContent="RAD",I=0;break}});function ue(){var e;return((e=document.getElementById("multiBtn"))==null?void 0:e.textContent)??null}function de(e){const t=ue();return e.replace(/\b(sin|cos|tan|sec|csc|cot|asin|acos|atan|asec|acsc|acot)\s*\(([^)]+)\)/g,(n,r,i)=>{let a=i,c="";return r.startsWith("a")||(t==="DEG"&&(a=`(${i})*Math.PI/180`),t==="GRAD"&&(a=`(${i})*Math.PI/200`)),r.startsWith("a")&&(t==="DEG"&&(c="*180/Math.PI"),t==="GRAD"&&(c="*200/Math.PI")),`${r}(${a})${c}`})}const j=document.querySelector("#fBtn");let k=!1;j&&j.addEventListener("click",()=>{k=!k,console.log("F-E activado:",k)});window.raizCompleja=e=>e>=0?e**.5:new o(0,Math.sqrt(-e));window.raizCubicaCompleja=e=>e>=0?Math.cbrt(e):new o(e,0).pow(1/3);function he(e){try{const t=Function('"use strict"; return ('+e+")")();return console.log("Expresión evaluada:",e),t instanceof o?t.toString():String(t)}catch(t){return console.error("Error evaluando expresión:",t),"Syntax ERROR"}}function me(e){let t=e;return t=t.replaceAll("pow(","Math.pow(").replaceAll("xylog(","Math.logxy(").replace(/(\d+\.?\d*)→dms/g,"Math.DMS($1)").replace(/(\d+),(\d+),(\d+)→deg/g,"Math.DEG($1,$2,$3)").replace(/²√(-?\d+(\.\d+)?)/g,(n,r)=>`raizCompleja(${r})`).replace(/∛(-?\d+(\.\d+)?)/g,(n,r)=>`raizCubicaCompleja(${r})`).replace(/yroot(\d+(\.\d+)?|\([^()]+\))/g,"Math.pow($1)").replaceAll("MOD(","Math.mod(").replace("π","Math.PI").replace(/\bacoth\b/g,"Math.acoth").replace(/\bacsch\b/g,"Math.acsch").replace(/\basech\b/g,"Math.asech").replace(/\basin\b/g,"Math.asin").replace(/\bacos\b/g,"Math.acos").replace(/\batan\b/g,"Math.atan").replace(/\basec\b/g,"Math.asec").replace(/\bacsc\b/g,"Math.acsc").replace(/\bacot\b/g,"Math.acot").replace(/\basinh\b/g,"Math.asinh").replace(/\bacosh\b/g,"Math.acosh").replace(/\batanh\b/g,"Math.atanh").replace(/\bsinh\b/g,"Math.sinh").replace(/\bcosh\b/g,"Math.cosh").replace(/\btanh\b/g,"Math.tanh").replace(/\bcoth\b/g,"Math.coth").replace(/\bcsch\b/g,"Math.csch").replace(/\bsech\b/g,"Math.sech").replace(/\bsin\b/g,"Math.sin").replace(/\bcos\b/g,"Math.cos").replace(/\btan\b/g,"Math.tan").replace(/\bsec\b/g,"Math.sec").replace(/\bcot\b/g,"Math.cot").replaceAll("exp(","Math.EXPT(").replaceAll("²","**2").replaceAll("³","**3").replaceAll("^","**").replace(/-(\d+(\.\d+)?)\*\*/g,"(-$1)**").replace(/log\(/g,"Math.log10(").replace(/(^|[^a-zA-Z0-9_])e\^(\([^)]+\)|\d+(\.\d+)?)/g,(n,r,i)=>`${r}Math.exp(${i})`).replace(/(^|[^a-zA-Z0-9_])\be\b/g,(n,r)=>`${r}Math.E`).replaceAll("10^","10**").replaceAll("|x|","Math.abs(").replaceAll("⌊x⌋(","Math.floor(").replaceAll("⌈x⌉(","Math.ceil(").replace(/(\d+(\.\d+)?)%/g,(n,r)=>`(${r}*0.01)`).replace(/(\d+(\.\d+)?)%(\d+(\.\d+)?)/g,(n,r,i,a)=>`((${r}/${a})*100)`).replace(/(\d+)!/g,(n,r)=>K(Number(r)).toString()),t=de(t),t}function fe(){const e=document.querySelector("#input");e&&e.value!==""&&parseFloat(e.value)!==0?(e.value=(1/parseFloat(e.value)).toString(),s.expression=e.value):alert("Error: División entre 0")}function pe(){const e=document.querySelector("#input");if(!e)return;const t=e.value,n=/(-?\d+(\.\d+)?)(?!.*\d)/,r=t.match(n);if(r&&r.index!==void 0){const i=r[0],a=i.startsWith("-")?i.slice(1):"-"+i;e.value=t.slice(0,r.index)+a+t.slice(r.index+i.length),s.expression=e.value}}const G=document.querySelector(".basic"),_=document.querySelector(".show-nt"),U=document.querySelector(".show-nt-grapic"),Y=document.querySelector(".specialButtons");function S(e){switch(G.style.display="none",_.style.display="none",U.style.display="none",Y.style.display="none",e){case"basic":G.style.display="flex";break;case"sci":_.style.display="flex",Y.style.display="flex";break;case"graphic":U.style.display="flex";break}}S("basic");function Me(e){const t=`0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVW⌊⌋XYZ+-*/=!^⌈.⌉,|→π²³√()%∛°'"`;for(let i=0;i<e.length;i++)if(!t.includes(e[i]))return{valido:!1,error:`Carácter inválido: "${e[i]}"`};const n=/[a-zA-Z]+|\d+(\.\d+)?|['"]|[%+\-*/^=()]/g,r=e.match(n);return!r||r.length===0?{valido:!1,error:"Ecuación vacía o inválida"}:{valido:!0,tokens:r}}function be(e){const t=Me(e);return t.valido?!0:(alert("Error: "+t.error),!1)}const E=document.querySelector("#input"),N=document.querySelector("#historyContent");function ye(e,t,n){if(!N)return;const r=document.createElement("div");r.className="history-item",s.result=n,s.expression=t;const i=document.createElement("span"),a=n!=null?n.toString():"";i.textContent=`${t} = ${a}`,i.dataset.userResult=a,i.style.cursor="pointer",i.dataset.userInput=t,i.dataset.userResult=a,i.addEventListener("click",()=>{E&&(E.value=i.dataset.userInput??"")}),r.appendChild(i),r.dataset.idi=e.toString();const c=document.createElement("button");c.textContent="Eliminar",c.className="delete-history",c.addEventListener("click",()=>{Q(Number(r.dataset.idi)),r.remove()}),r.appendChild(c),N.appendChild(r),ge(e,t,n)}function ge(e,t,n){const r=JSON.parse(localStorage.getItem("historial")||"[]");r.push({idi:e,expression:t,result:n}),localStorage.setItem("historial",JSON.stringify(r))}function ve(){JSON.parse(localStorage.getItem("historial")||"[]").forEach(t=>we(t.idi,t.expression,t.result))}function we(e,t,n){if(!N)return;const r=document.createElement("div");r.className="history-item",s.result=n,s.expression=t;const i=document.createElement("span"),a=n!=null?n.toString():"";i.textContent=`${t} = ${a}`,i.dataset.userResult=a,i.style.cursor="pointer",i.dataset.userInput=t,i.dataset.userResult=a,i.addEventListener("click",()=>{E&&(E.value=i.dataset.userInput??"")}),r.appendChild(i);const c=document.createElement("button");c.textContent="Eliminar",c.className="delete-history",c.addEventListener("click",()=>{Q(Number(r.dataset.idi)),r.remove()}),r.appendChild(c),r.dataset.idi=e.toString(),N.appendChild(r)}function Q(e){const n=JSON.parse(localStorage.getItem("historial")||"[]").filter(r=>r.idi!==e);localStorage.setItem("historial",JSON.stringify(n))}function Ie(e,t){const n=Date.now()+Math.random();ye(n,e,t)}window.addEventListener("load",()=>{ve()});const Ee=document.querySelectorAll(".button"),h=document.getElementById("input");document.getElementById("equal");document.getElementById("clear");document.getElementById("erase");document.getElementById("historyContent");document.querySelector("#btn-mr");document.querySelector("#Memory");document.getElementById("multiBtn");document.querySelector("#fBtn");document.querySelector("#globalMPlus");document.querySelector("#globalMMinus");document.querySelector("#btnRecuperarMemoria");const Ne=document.querySelector("#btnBasic"),Se=document.querySelector("#btnScientific"),qe=document.querySelector("#btnGraphic");Ne.addEventListener("click",()=>S("basic"));Se.addEventListener("click",()=>S("sci"));qe.addEventListener("click",()=>S("graphic"));const xe=[{btnId:"clickk",panelId:"presionar"},{btnId:"clickk1",panelId:"presionar1"}],Ce=[{id:"equal",handler:R},{id:"equal1",handler:R},{id:"deleteAll",handler:A},{id:"restoreMemory",handler:P},{id:"memoryM",handler:B},{id:"memoryMe",handler:O},{id:"saveMemory",handler:$},{id:"equal2",handler:R},{id:"deleteAll1",handler:A},{id:"restoreMemory1",handler:P},{id:"memoryM1",handler:B},{id:"memoryMe1",handler:O},{id:"saveMemory1",handler:$}];Ce.forEach(e=>{const t=document.getElementById(e.id);t&&t.addEventListener("click",e.handler)});xe.forEach(e=>{const t=document.getElementById(e.btnId),n=document.getElementById(e.panelId);t&&n&&t.addEventListener("click",()=>n.classList.toggle("memoryButton"))});window.onload=()=>{h.value="",s.expression="",s.result="",s.bd&&s.memoryContainer&&J(s)};window.addEventListener("load",()=>{h.value="",s.expression="",s.result="",s.bd&&s.memoryContainer&&J(s)});window.addEventListener("load",()=>{V()});window.addEventListener("load",H);window.addEventListener("resize",H);Ee.forEach(e=>{e.addEventListener("click",t=>{s.equalPressed&&(s.equalPressed=0);const r=t.target.dataset.number??"";switch(r){case"AC":h.value="",s.expression="";break;case"DEL":h.value=h.value.slice(0,-1),s.expression=h.value;break;case"+/-":pe(),s.expression=h.value;break;case"1/":fe(),s.expression=h.value;break;default:h.value+=r,s.expression=h.value}})});typeof Math.log10!="function"&&(Math.log10=function(e){return Math.log(e)/Math.log(10)});function R(){try{s.equalPressed=1;const e=h.value;let t=e;if(s.expression=e,!be(e))return;t=me(e),t=le(t);const n=he(t);s.result=n,Le(n),Ie(s.expression,s.result)}catch(e){e instanceof Error?alert("Error: "+e.message):alert("Error desconocido")}}function Le(e){typeof e=="string"?h.value=e:h.value=Number.isInteger(e)?e.toString():e.toFixed(2)}
